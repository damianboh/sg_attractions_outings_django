{% extends "base_half_bg.html" %}
{% load static %}
{% block title %}Profile{% endblock %}
{% block top_content %} 
    <div class = "row justify-content-center text-center mt-3 mb-3">  
        <h1 class="text-light pb-1">User Profiles</h1>                      
        <form id="searchForm" class="form search-box" action="{% url 'profiles' %}" method="get">
            <div class="input-group">   
                <input class="form-control rounded input input--text" id="formInput#search" placeholder="Search Users" type="text" name="search_query"
                    value="{{search_query}}"/>
                <input class="btn btn-primary" type="submit" value="Search" />
            </div>
        </form>               
    </div>           
{% endblock %} 

{% block content %} 
    <div class="container-xxl p-3" style="max-width: 1034px;">
        <div class="row row-cols-1 row-cols-md-2 g-4 ">            
        {% for profile in profiles %}
            <div class="col">                
                <div class="card h-100" style="border-radius: 15px;">        
                    <a href="{% url 'profile_detail' profile.email %}" class="stretched-link"></a>            
                    <div class="card-body p-3 p-md-4">
                        <div class="d-flex text-black">                  
                            <div class="flex-grow-1 ms-3">
                                <h5 class="mb-1">{{ profile.name }}</h5>
                                <p class="mb-2 pb-1" style="color: #2b2a2a;">
                                    <a href=mailto:{{ profile.email }}>{{ profile.email }}</a>
                                </p>
                                <div class="justify-content-center"> 
                                    <div class="d-flex justify-content-start text-center rounded-3 p-2 mt-3 mb-3 mx-auto"
                                        style="background-color: #efefef; max-width: 360px;">
                                        <div class="px-3">
                                            <p class="small text-muted mb-1">Saved Attractions</p>
                                            <p class="mb-0">{{ profile.saved_attractions.count }}</p>
                                        </div>
                                        <div class="vr"></div>
                                        <div class="px-3">
                                            <p class="small text-muted mb-1">Outings Created</p>
                                            <p class="mb-0">{{ profile.created_outings.count }}</p>
                                        </div>
                                        <div class="vr"></div>
                                        <div class="px-3">
                                            <p class="small text-muted mb-1">Outing Invites</p>
                                            <p class="mb-0">{{ profile.invites.count }}</p>
                                        </div>
                                    </div> 
                                </div> 
                                <p class="mb-2 pt-1" style="color: #2b2a2a;">
                                    {{ profile.about|slice:"150" }}</a>
                                </p>                       
                            </div>
                        </div>
                    </div>                 
                </div>
            </div>
        {% endfor %}
        </div>	
    </div>	  

{% endblock %}