{% extends "base_half_bg.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %}Profile{% endblock %}
{% block top_content %}<h1 class="text-light text-center">Outing Invitation</h1>{% endblock %} 
{% block content %}   
    <div class="container-md attraction-box pt-5 pb-5"  >            
        <div class="pt-3 pb-3 px-5 rounded" style="background-color: #ffffff;">
            {% if messages %}
                {% for message in messages %}
                <div role="alert" aria-live="assertive" aria-atomic="true" class="toast" data-bs-autohide="false">
                    <div class="toast-header">
                    <strong class="me-auto">{{ message }}</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                </div>
                {% endfor %}
            {% endif %}

            <div class="my-3"> 
                <h2 class="mt-3 text-profile-header" >Outing for {{ outing.attraction.name }}</h2>
                <h6 class="theme-color lead"><a href={{ outing.attraction.website_url }}>{{ outing.attraction.website_url }}</a></h6>        
            </div>    
          
            <h3><span class="badge text-muted my-2" style="background-color: #efefef;">Scheduled for: {{ outing.start_time }}</span></h3> 
    
            <hr class="line my-3">
            <h4 class="mt-2 mb-2 text-profile-header">Attraction Summary</h4>
            <p>{{ outing.attraction.summary }}</p>

            <hr class="line my-3">

            <h3>Invites</h3>
            <ul>
                {% for invite in outing.invites.all %}
                    <li>
                        {{ invite.invitee.email }}
                        ({% if invite.attendance_confirmed %}Is {% if not invite.is_attending %}not {% endif %}attending{% else %}Awaiting response{% endif %})
                    </li>
                {% empty %}
                    <li>No invites yet</li>
                {% endfor %}
            </ul>
            {% if is_in_the_past %}
                <h4>This outing is in the past, and can&rsquo;t be edited.</h4>
            {% else %}
                {% if is_creator %}
                    <hr class="line my-3">
                    <h4>Invite someone else</h4>
                    <p>{% crispy invitee_form %}</p>
                {% else %}
                    <h4>Your attendance</h4>
                    {% crispy attendance_form %}
                {% endif %}
            {% endif %}

        </div>		
    </div>  
{% endblock %}